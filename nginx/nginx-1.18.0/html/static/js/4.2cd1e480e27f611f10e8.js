webpackJsonp([4],{BLno:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-menu",{staticClass:"categories",attrs:{"default-active":"0","active-text-color":"red"},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"0"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("全部")])]),t._v(" "),s("el-menu-item",{attrs:{index:"1"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("文学")])]),t._v(" "),s("el-menu-item",{attrs:{index:"2"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("流行")])]),t._v(" "),s("el-menu-item",{attrs:{index:"3"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("文化")])]),t._v(" "),s("el-menu-item",{attrs:{index:"4"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("生活")])]),t._v(" "),s("el-menu-item",{attrs:{index:"5"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("经管")])]),t._v(" "),s("el-menu-item",{attrs:{index:"6"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("科技")])])],1)},staticRenderFns:[]};var n=s("VU/8")({name:"SideMenu",data:function(){return{cid:""}},methods:{handleSelect:function(t,e){this.cid=t,this.$emit("indexSelect")}}},a,!1,function(t){s("JIcZ")},"data-v-54487c64",null).exports,i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"margin-bottom":"30px",display:"flex","justify-content":"center","align-items":"center"}},[s("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"通过书名或作者搜索...","prefix-icon":"el-icon-search",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClick(e)}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._v(" "),s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.searchClick}},[t._v("搜索")])],1)},staticRenderFns:[]};var r={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-switch",{attrs:{"active-text":"列表视图"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})},staticRenderFns:[]};var o={name:"Books",components:{SearchBar:s("VU/8")({name:"SearchBar",data:function(){return{keywords:"",books:[],cardLoading:[]}},methods:{searchClick:function(){this.$emit("onSearch")}}},i,!1,function(t){s("MoTt")},"data-v-4c1b5c54",null).exports,ViewSwitch:s("VU/8")({name:"ViewSwitch",data:function(){return{value:!0}}},r,!1,function(t){s("QkFE")},"data-v-28331a0c",null).exports},data:function(){return{books:[],currentPage:1,pagesize:18}},mounted:function(){this.loadBooks()},methods:{loadBooks:function(){var t=this;this.$axios.get("/books").then(function(e){e&&200===e.data.code&&(t.books=e.data.result)})},handleCurrentChange:function(t){this.currentPage=t},searchResult:function(){var t=this;this.$axios.get("/search?keywords="+this.$refs.searchBar.keywords,{}).then(function(e){e&&200===e.data.code&&(t.books=e.data.result)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",{staticStyle:{height:"840px"}},[s("search-bar",{ref:"searchBar",on:{onSearch:t.searchResult}}),t._v(" "),s("view-switch",{staticClass:"switch"}),t._v(" "),t._l(t.books.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),function(e){return s("el-tooltip",{key:e.id,attrs:{effect:"dark",placement:"right"}},[s("p",{staticStyle:{"font-size":"14px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticStyle:{"font-size":"13px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[s("span",[t._v(t._s(e.author))]),t._v(" /\n        "),s("span",[t._v(t._s(e.date))]),t._v(" /\n        "),s("span",[t._v(t._s(e.press))]),t._v(" /\n        "),s("span",[t._v("在库数量"+t._s(e.stock))])]),t._v(" "),s("p",{staticClass:"abstract",staticStyle:{width:"300px"},attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.abs))]),t._v(" "),s("el-card",{staticClass:"book",staticStyle:{width:"135px","margin-bottom":"20px",height:"233px",float:"left","margin-right":"15px"},attrs:{bodyStyle:"padding:10px",shadow:"hover"}},[s("div",{staticClass:"cover"},[s("img",{attrs:{src:e.cover,alt:"封面"}})]),t._v(" "),s("div",{staticClass:"info"},[s("div",{staticClass:"title"},[s("a",{attrs:{href:""}},[t._v(t._s(e.title))])])]),t._v(" "),s("div",{staticClass:"author"},[t._v(t._s(e.author))])])],1)})],2),t._v(" "),s("el-row",[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,total:t.books.length},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var l={name:"AppLibrary",components:{Books:s("VU/8")(o,c,!1,function(t){s("Zrnq")},"data-v-7bc1e73d",null).exports,SideMenu:n},data:function(){return{cid:0}},methods:{listByCategory:function(){var t=this;this.$axios.get("categories/books",{params:{cid:this.$refs.sideMenu.cid}}).then(function(e){e&&200===e.data.code&&(t.$refs.booksArea.books=e.data.result,t.$refs.booksArea.currentPage=1)})}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-aside",{staticStyle:{width:"200px","margin-top":"20px"}},[e("switch"),this._v(" "),e("SideMenu",{ref:"sideMenu",on:{indexSelect:this.listByCategory}})],1),this._v(" "),e("el-main",[e("books",{ref:"booksArea",staticClass:"books-area"})],1)],1)},staticRenderFns:[]};var d=s("VU/8")(l,u,!1,function(t){s("QO2U")},"data-v-10f2df42",null);e.default=d.exports},JIcZ:function(t,e){},MoTt:function(t,e){},QO2U:function(t,e){},QkFE:function(t,e){},Zrnq:function(t,e){}});
//# sourceMappingURL=4.2cd1e480e27f611f10e8.js.map